<!Doctype HTML>
<html>
<head>
  <title>Party Music Player</title>
  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/css/bootstrap.min.css">
  <link rel="stylesheet" href="main.css">

  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script src="https://apis.google.com/js/client.js?onload=googleApiClientReady"></script>
  <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase-database.js"></script>
  <script src="https://www.gstatic.com/firebasejs/4.9.1/firebase.js"></script>
  <script>
    // Initialize Firebase
    var config = {
      apiKey: "AIzaSyDO0oEHzN2sRpGOq1v2RmH4UAF36AMETuc",
      authDomain: "socialmusic-af39c.firebaseapp.com",
      databaseURL: "https://socialmusic-af39c.firebaseio.com",
      projectId: "socialmusic-af39c",
      storageBucket: "socialmusic-af39c.appspot.com",
      messagingSenderId: "1091771452022"
    };
    firebase.initializeApp(config);
  </script>
</script>
</head>
<body>
  <div class="container">
    <div class="row">
      Enter Room ID:
    </div>
    <div class="row">
      <input id="room_id" type="text" />
    </div>
    <div class="row">
      <input id="enter_room" type="button" value="Enter Room">
    </div>
    <div class="row">
      <input id="new_room" type="button" value="Get New Room">
    </div>
  </div>
</body>
<script>

  var MAX_ID = 2176782335
  var conversion = ['0','1','2','3','4','5','6','7','8','9','A','B','C','D','E','F','G','H','I','J','K','L','M','N','O','P','Q','R','S','T','U','V','W','X','Y','Z'];
  var room_id = "";
  $("#enter_room").click(function() {
    room_id = $("#room_id").val()
    enterRoom();
  });

  $("#new_room").click(function() {
    var new_id = Math.round(Math.random()*MAX_ID);
    for(i = 5; i>0; i--)
    {
      var quantity = new_id/Math.pow(36,i)
      var integer = Math.floor(quantity)
      new_id = Math.round((quantity-integer)*Math.pow(36,i))
      room_id += conversion[integer];
    }

    $("#room_id").val(room_id);
    enterRoom();
  });
  var enterRoom = function()
  {
    window.location = "player.html?room_id="+room_id;
  }

</script>
</html>
